'use strict';var _slicedToArray=function(){function a(a,b){var c=[],d=!0,e=!1,f=void 0;try{for(var g,h=a[Symbol.iterator]();!(d=(g=h.next()).done)&&(c.push(g.value),!(b&&c.length===b));d=!0);}catch(a){e=!0,f=a}finally{try{!d&&h['return']&&h['return']()}finally{if(e)throw f}}return c}return function(b,c){if(Array.isArray(b))return b;if(Symbol.iterator in Object(b))return a(b,c);throw new TypeError('Invalid attempt to destructure non-iterable instance')}}();(function(a,b){function c(){l.add('interactive')}function d(){l.remove('interactive')}function e(a,b){function c(){e>=b||(e+=d,e>b&&(e=b),a.textContent=m(e),requestAnimationFrame(c))}var d=Math.ceil(b/60),e=0;requestAnimationFrame(c)}if(!b.supported())return void alert('Hi sorry, looks like your browser is not supported to render the map \uD83D\uDE22.\n\nYou could try to load this site on another (latest) browser perhaps? \uD83D\uDE4F');b.accessToken='pk.eyJ1IjoiY2hlZWF1biIsImEiOiJjaXhmb3o3bTEwMDAzMnRudTJuNjh1eXQ1In0.yO6WeKJwx6yIPoVx5aPavQ';var f=new b.Map({container:'map',style:'mapbox://styles/cheeaun/cixol8ezg002g2rqs007w3jmt',maxZoom:14,logoPosition:'top-right',attributionControl:!1,pitchWithRotate:!1,dragRotate:!1,boxZoom:!1,zoom:0.1});f.touchZoomRotate.disableRotation();var g=a.getElementById('info'),h=a.getElementById('info-countries'),i=a.getElementById('info-places'),j=a.getElementById('info-checkins'),k=a.getElementById('countries'),l=a.body.classList;f.on('dragstart',c),f.on('zoomstart',c),k.addEventListener('touchstart',d,!1),k.addEventListener('mouseenter',d),f.on('click',function(){l.toggle('interactive')});var m=function(a){return a.toString().replace(/\B(?=(\d{3})+(?!\d))/g,',')};f.addControl(new b.AttributionControl({compact:!0}),'top-right'),f.addControl(new b.NavigationControl,'top-right');Promise.all([new Promise(function(a,b){f.on('load',a),f.on('error',b)}),fetch('data/checkins.min.geojson').then(function(a){return a.json()})]).then(function(c){var d=_slicedToArray(c,2),g=d[0],n=d[1],o={},p={},q=n.features.length;n.features=n.features.filter(function(a){var c=a.properties,d=c.id,e=c.country,f=!p[d];if(f){if(!o[e]){var g=a.properties.cc.toLowerCase();o[e]={cc:g,bounds:new b.LngLatBounds,places_count:0,checkins_count:0}}var h=a.geometry.coordinates;o[e].bounds.extend([h[0],h[1]]),o[e].places_count++,p[d]=!0}return o[e].checkins_count++,f});var r=Object.keys(p).length,s=Object.keys(o).map(function(a){var b=o[a];return{name:a,cc:b.cc,bounds:b.bounds,places_count:b.places_count,checkins_count:b.checkins_count}}),t=s.length;s.sort(function(c,a){return a.checkins_count-c.checkins_count}),s.forEach(function(b){var c=b.cc,d=b.name,e=b.bounds,g=b.checkins_count,h=b.places_count,i=a.createElement('button');i.type='button',i.addEventListener('click',function(){f.fitBounds(e,{padding:150})},!1),i.innerHTML='\n        <img src="data/countries/'+c+'.svg" width="50" height="50" alt=""><br>\n        <b>'+d+'</b>\n        <br>\n        '+m(g)+' check-in'+(1<g?'s':'')+'\n        <br>\n        '+m(h)+' place'+(1<h?'s':'')+'\n      ',k.appendChild(i)}),f.addSource('checkins',{type:'geojson',data:n,cluster:!0,clusterMaxZoom:10,clusterRadius:10}),f.addLayer({id:'cluster',type:'circle',source:'checkins',filter:['has','point_count'],paint:{"circle-radius":{property:'point_count',stops:[[{zoom:0,value:3},7],[{zoom:0,value:10},10],[{zoom:0,value:100},13],[{zoom:0,value:200},16]]},"circle-color":'#14B7F4',"circle-opacity":.9,"circle-stroke-width":{property:'point_count',stops:[[3,3],[50,6]]},"circle-stroke-color":'#14B7F4',"circle-stroke-opacity":.3}}),f.addLayer({id:'checkins-count',type:'symbol',source:'checkins',filter:['has','point_count'],maxzoom:11,layout:{"text-field":'{point_count_abbreviated}',"text-size":10}}),f.addLayer({id:'checkins',type:'circle',source:'checkins',minzoom:8,filter:['!has','point_count'],paint:{"circle-radius":3,"circle-color":'#14B7F4',"circle-opacity":0.9,"circle-stroke-width":3,"circle-stroke-color":'#14B7F4',"circle-stroke-opacity":0.1}}),f.once('data',function(){requestAnimationFrame(function(){e(j,q),e(i,r),e(h,t),l.add('render')})}),f.on('mouseenter','cluster',function(){f.getCanvas().style.cursor='pointer'}),f.on('click','cluster',function(a){f.flyTo({center:a.lngLat,zoom:f.getZoom()+2})}),f.on('mouseleave','cluster',function(){f.getCanvas().style.cursor=''})})})(document,mapboxgl);

//# sourceMappingURL=app.js.map